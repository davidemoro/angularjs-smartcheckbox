<div class="smartcheckbox">
   

  <div class="input-group filtercontrols">
    <span class="input-group-addon">Filter</span>
    <input type="text" class="form-control" placeholder="filter by" ng-model="filter">
    <span id="reset-filter" class="input-group-addon" ng-click="filter = ''">reset</span>
  </div>

  <div class="input-group selectoptionscontrols">
    <button id="select-all" ng-click="selectAll()" type="button" class="btn btn-default btn-sm">Select all</button>
    <button id="unselect-all" ng-click="unselectAll()" type="button" class="btn btn-default btn-sm">Unselect all</button>
    <button id="toggle-all" ng-click="toggleAll()" type="button" class="btn btn-default btn-sm">Toggle</button>
  </div>

  <div class="input-group ordercontrols">
    <label class="radio-inline">
      <input type="radio" value="label" ng-model="orderby"> Order by label
    </label>
    <label class="radio-inline">
      <input type="radio" value="id" ng-model="orderby"> Order by id
    </label>
    <label>
      <input type="checkbox" ng-model="reverse" />
      Reverse
    </label>
  </div>

  <div class="checkboxes">
    <div class="checkbox widgetcontrols" ng-repeat="elem in filtered = (model | filter:{$:filter} | orderBy: orderby:reverse)">
      <label>
        <input ng-if="isRequired()" class="smart" type="checkbox" ng-model="elem.value" ng-required="requiredfn()" />
        <input ng-if="!isRequired()" class="smart" type="checkbox" ng-model="elem.value" />
        <span class="itemid">[{{elem.id}}]</span> {{elem.label}}
      </label>
    </div>
  </div>

  <div class="selectedcontrols">
    <span class="label label-info" ng-repeat="elem in model | filter:{value: true}">
      <span class="itemid">[{{elem.id}}]</span> {{elem.label}}
      <span class="badge" ng-click="unselect(elem)">x</span>
    </span>
  </div>
</div>
